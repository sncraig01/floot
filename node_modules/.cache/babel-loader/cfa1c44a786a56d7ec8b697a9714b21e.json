{"ast":null,"code":"var _jsxFileName = \"/Users/sarahcraig/Desktop/projects/drinking_game/src/PlayGame.js\";\nimport React from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport GameHeader from './GameHeader.js';\nimport Papa from 'papaparse';\nimport Alert from './Alert.js';\nimport question_data from \"./Questions.json\";\nimport question_data_caliente from \"./QuestionsCaliente.json\";\n\nclass PlayGame extends React.Component {\n  constructor(..._args) {\n    super(..._args);\n    this.state = {\n      ptp_list: this.props.location.state.ptp_list,\n      colors: this.props.location.state.colors,\n      displayed_q: '',\n      questions: [],\n      end_game_message: '',\n      question_counter: 0,\n      game_length: 50 // game will end after 50 questions\n\n    };\n\n    this.componentDidMount = () => {\n      this.loadQuestions();\n    };\n\n    this.loadQuestions = () => {\n      const q_array = question_data.map(data => {\n        return {\n          text: data.text,\n          ptps_needed: data.ptps_needed\n        };\n      });\n      console.log(q_array);\n      this.setState({\n        questions: q_array\n      }, () => {\n        this.displayRandomQuestion();\n      });\n    };\n\n    this.formatString = (str, args) => {\n      let return_str = str;\n\n      for (let i = 0; i < args.length; i++) {\n        return_str = return_str.replace('{}', args[i]);\n      }\n\n      return return_str;\n    };\n\n    this.chooseRandomPtps = n => {\n      let ptps = this.state.ptp_list;\n      let random_nums = [];\n\n      while (random_nums.length < n) {\n        var item = ptps[Math.floor(Math.random() * ptps.length)];\n\n        if (!random_nums.includes(item)) {\n          random_nums.push(item);\n        }\n      }\n\n      return random_nums;\n    };\n\n    this.chooseRandomQuestion = () => {\n      let qs = this.state.questions;\n      let item = qs[Math.floor(Math.random() * qs.length)];\n      return item;\n    };\n\n    this.endGame = () => {\n      this.setState({\n        end_game_message: \"you've finished the game! yay\"\n      });\n    };\n\n    this.displayRandomQuestion = () => {\n      let q_counter = this.state.question_counter;\n\n      if (q_counter >= this.state.game_length || this.state.questions.length == 0) {\n        this.endGame();\n      } else {\n        let random_q = this.chooseRandomQuestion();\n\n        while (random_q.ptps_needed > this.state.ptp_list.length) {\n          // pick a new question\n          random_q = this.chooseRandomQuestion();\n        }\n\n        let random_ptps = this.chooseRandomPtps(random_q.ptps_needed);\n        let filled_q = this.formatString(random_q.text, random_ptps);\n        console.log(\"filled q: \");\n        console.log(filled_q); // remove the question from the list\n\n        let q_list = this.state.questions;\n        let i = this.findQinQList(random_q, q_list);\n\n        if (i != null) {\n          q_list.splice(i, 1);\n          this.setState({\n            displayed_q: filled_q,\n            questions: q_list,\n            question_counter: q_counter + 1\n          });\n        } else {\n          console.log(\"Question already not in list\");\n        }\n      }\n    };\n\n    this.findQinQList = (q, q_list) => {\n      for (let i = 0; i < q_list.length; i++) {\n        if (q_list[i].text == q.text) {\n          return i;\n        }\n      }\n\n      return null;\n    };\n\n    this.completeQuestion = () => {\n      this.displayRandomQuestion();\n    };\n\n    this.goBack = () => {\n      this.props.history.push('/getstarted');\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(GameHeader, {\n      ptp_list: this.state.ptp_list,\n      colors: this.state.colors,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Question\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }\n    }, \" \", this.state.displayed_q), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Done-Button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.completeQuestion(),\n      variant: \"contained\",\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, \" Done \")), this.state.end_game_message == '' ? null : /*#__PURE__*/React.createElement(Alert, {\n      message: this.state.end_game_message,\n      onClose: this.goBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 54\n      }\n    }));\n  }\n\n}\n\nexport default PlayGame;","map":{"version":3,"sources":["/Users/sarahcraig/Desktop/projects/drinking_game/src/PlayGame.js"],"names":["React","Button","GameHeader","Papa","Alert","question_data","question_data_caliente","PlayGame","Component","state","ptp_list","props","location","colors","displayed_q","questions","end_game_message","question_counter","game_length","componentDidMount","loadQuestions","q_array","map","data","text","ptps_needed","console","log","setState","displayRandomQuestion","formatString","str","args","return_str","i","length","replace","chooseRandomPtps","n","ptps","random_nums","item","Math","floor","random","includes","push","chooseRandomQuestion","qs","endGame","q_counter","random_q","random_ptps","filled_q","q_list","findQinQList","splice","q","completeQuestion","goBack","history","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport GameHeader from './GameHeader.js'\nimport Papa from 'papaparse'\nimport Alert from './Alert.js'\n\nimport question_data from \"./Questions.json\"\nimport question_data_caliente from \"./QuestionsCaliente.json\"\n\n\nclass PlayGame extends React.Component {\n\n  state = {\n    ptp_list : this.props.location.state.ptp_list,\n    colors : this.props.location.state.colors,\n\n    displayed_q : '',\n    questions : [ ],\n\n    end_game_message : '',\n\n    question_counter : 0,\n    game_length: 50 // game will end after 50 questions\n  }\n\n  componentDidMount = () => {\n    this.loadQuestions()\n  }\n\n  loadQuestions = () => {\n    const q_array = question_data .map( (data) => {\n      return { text : data.text, ptps_needed : data.ptps_needed }\n    })\n\n    console.log( q_array )\n\n    this.setState( \n      {questions : q_array}, \n      () => {\n      this.displayRandomQuestion();\n      } \n    )\n  }\n\n  formatString = ( str, args ) => { \n    let return_str = str\n    for ( let i = 0; i < args.length; i++ ){\n      return_str = return_str.replace( '{}', args[i] )\n    }\n    return return_str\n  }\n\n  chooseRandomPtps = ( n ) => {\n    let ptps = this.state.ptp_list\n\n    let random_nums = []\n    while (random_nums.length < n) {\n      var item = ptps[Math.floor(Math.random() * ptps.length)];\n      if ( !random_nums.includes( item ) ){\n        random_nums.push( item )\n      }\n    }\n\n    return random_nums\n  }\n\n  chooseRandomQuestion = () => {\n    let qs = this.state.questions\n    let item = qs[Math.floor(Math.random() * qs.length)];\n    return item\n  }\n\n  endGame = () => {\n    this.setState( {end_game_message : \"you've finished the game! yay\"})\n  }\n\n  displayRandomQuestion = () => {\n    let q_counter = this.state.question_counter\n    if( (q_counter >= this.state.game_length) || ( this.state.questions.length == 0 )){\n      this.endGame()\n    } else {\n      let random_q = this.chooseRandomQuestion()\n      while( random_q.ptps_needed > this.state.ptp_list.length) {\n        // pick a new question\n        random_q = this.chooseRandomQuestion()\n      }\n      let random_ptps = this.chooseRandomPtps( random_q.ptps_needed )\n      let filled_q  = this.formatString( random_q.text , random_ptps )\n\n      console.log( \"filled q: \")\n      console.log( filled_q )\n\n      // remove the question from the list\n      let q_list = this.state.questions\n      let i = this.findQinQList( random_q, q_list )\n      if ( i != null ){\n        q_list.splice( i, 1)\n        this.setState( {displayed_q : filled_q, questions : q_list, question_counter: q_counter + 1} )\n      } else {\n        console.log( \"Question already not in list\")\n      }\n    }\n\n  }\n\n  findQinQList = ( q, q_list ) => {\n    for (let i = 0; i < q_list.length; i ++ ){\n      if( q_list[i].text == q.text ){\n        return i\n      }\n    }\n    return null\n  }\n\n  completeQuestion = () => {\n    this.displayRandomQuestion()\n  }\n\n  goBack = () => {\n    this.props.history.push( '/getstarted' )\n  }\n  \n  render(){\n    return (\n      <div className=\"App\" >\n        <br/>\n        <GameHeader ptp_list={this.state.ptp_list} colors={this.state.colors}/>\n        <div className=\"Question\"> { this.state.displayed_q }</div>\n        <div className=\"Done-Button\"> \n          <Button onClick={() => this.completeQuestion()} variant=\"contained\" color=\"secondary\" > Done </Button>\n        </div>\n        { this.state.end_game_message == '' ? null : <Alert message={this.state.end_game_message} onClose={this.goBack} /> }\n      </div>\n    );\n  }\n\n}\n\nexport default PlayGame;\n"]},"metadata":{},"sourceType":"module"}